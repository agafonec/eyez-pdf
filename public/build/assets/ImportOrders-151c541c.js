import{o as g,u as A,y as pe,w as fe,h as ve,c as me,l as H,f as be,K as ge,d as he,H as E,T as xe,t as Y,p as ye,N as G,O as _e,e as x,_ as we,a as Oe,b as Le,P as Se}from"./AuthenticatedLayout-bcce753d.js";import{o as T,c as F,m as ke,b as m,x as k,z as K,K as ae,j as y,q as M,C as Ie,y as re,P as ee,F as W,H as Ce,A as V,E as De,R as B,r as w,g as Q,w as $,a as S,d as U,t as N,e as Pe,n as q,f as J,J as Re,Z as $e}from"./app-3b44d298.js";import{_ as Te}from"./InputError-2ef3bd08.js";import{_ as Be,a as Fe}from"./TextInput-a7e7bc5b.js";import{_ as Ae}from"./PrimaryButton-4d7ba441.js";import{D as Ve}from"./DangerButton-c8588a55.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import"./pdf-logo-dc8220cc.js";const je={name:"PageLoader",props:{width:{type:[Number,String],default:100},height:{type:[Number,String],default:100}}},Ne=m("circle",{cx:"50",cy:"50",r:"32","stroke-width":"8",stroke:"#5ed615","stroke-dasharray":"50.26548245743669 50.26548245743669",fill:"none","stroke-linecap":"round"},[m("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",keyTimes:"0;1",values:"0 50 50;360 50 50"})],-1),Ee=[Ne];function Me(e,o,n,r,t,s){return T(),F("svg",ke({xmlns:"http://www.w3.org/2000/svg"},{width:n.width,height:n.height},{"xmlns:xlink":"http://www.w3.org/1999/xlink",style:{display:"block","shape-rendering":"auto"},viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}),Ee,16)}const ze=X(je,[["render",Me]]);function Ue(e){throw new Error("Unexpected object: "+e)}var I=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(I||{});function qe(e,o){let n=o.resolveItems();if(n.length<=0)return null;let r=o.resolveActiveIndex(),t=r??-1,s=(()=>{switch(e.focus){case 0:return n.findIndex(i=>!o.resolveDisabled(i));case 1:{let i=n.slice().reverse().findIndex((c,f,l)=>t!==-1&&l.length-f-1>=t?!1:!o.resolveDisabled(c));return i===-1?i:n.length-1-i}case 2:return n.findIndex((i,c)=>c<=t?!1:!o.resolveDisabled(i));case 3:{let i=n.slice().reverse().findIndex(c=>!o.resolveDisabled(c));return i===-1?i:n.length-1-i}case 4:return n.findIndex(i=>o.resolveId(i)===e.id);case 5:return null;default:Ue(e)}})();return s===-1?r:s}function te(e,o){if(e)return e;let n=o??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function He(e,o){let n=k(te(e.value.type,e.value.as));return K(()=>{n.value=te(e.value.type,e.value.as)}),ae(()=>{var r;n.value||g(o)&&g(o)instanceof HTMLButtonElement&&!((r=g(o))!=null&&r.hasAttribute("type"))&&(n.value="button")}),n}function se(e={},o=null,n=[]){for(let[r,t]of Object.entries(e))ue(n,ie(o,r),t);return n}function ie(e,o){return e?e+"["+o+"]":o}function ue(e,o,n){if(Array.isArray(n))for(let[r,t]of n.entries())ue(e,ie(o,r.toString()),t);else n instanceof Date?e.push([o,n.toISOString()]):typeof n=="boolean"?e.push([o,n?"1":"0"]):typeof n=="string"?e.push([o,n]):typeof n=="number"?e.push([o,`${n}`]):n==null?e.push([o,""]):se(n,o,e)}function Ke(e,o,n){let r=k(n==null?void 0:n.value),t=y(()=>e.value!==void 0);return[y(()=>t.value?e.value:r.value),function(s){return t.value||(r.value=s),o==null?void 0:o(s)}]}function oe(e){return[e.screenX,e.screenY]}function Ye(){let e=k([-1,-1]);return{wasMoved(o){let n=oe(o);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(o){e.value=oe(o)}}}let ne=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function le(e){var o,n;let r=(o=e.innerText)!=null?o:"",t=e.cloneNode(!0);if(!(t instanceof HTMLElement))return r;let s=!1;for(let c of t.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),s=!0;let i=s?(n=t.innerText)!=null?n:"":r;return ne.test(i)&&(i=i.replace(ne,"")),i}function Qe(e){let o=e.getAttribute("aria-label");if(typeof o=="string")return o.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(t=>{let s=document.getElementById(t);if(s){let i=s.getAttribute("aria-label");return typeof i=="string"?i.trim():le(s).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return le(e).trim()}function Je(e){let o=k(""),n=k("");return()=>{let r=g(e);if(!r)return"";let t=r.innerText;if(o.value===t)return n.value;let s=Qe(r).trim().toLowerCase();return o.value=t,n.value=s,s}}function We(e,o){return e===o}var Xe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Xe||{}),Ze=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Ze||{}),Ge=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ge||{});function et(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let de=Symbol("ListboxContext");function z(e){let o=De(de,null);if(o===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,z),n}return o}let tt=M({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>We},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:o,attrs:n,emit:r}){let t=k(1),s=k(null),i=k(null),c=k(null),f=k([]),l=k(""),a=k(null),O=k(1);function L(u=d=>d){let d=a.value!==null?f.value[a.value]:null,p=_e(u(f.value.slice()),D=>g(D.dataRef.domRef)),b=d?p.indexOf(d):null;return b===-1&&(b=null),{options:p,activeOptionIndex:b}}let h=y(()=>e.multiple?1:0),[P,R]=Ke(y(()=>e.modelValue),u=>r("update:modelValue",u),y(()=>e.defaultValue)),_=y(()=>P.value===void 0?A(h.value,{1:[],0:void 0}):P.value),v={listboxState:t,value:_,mode:h,compare(u,d){if(typeof e.by=="string"){let p=e.by;return(u==null?void 0:u[p])===(d==null?void 0:d[p])}return e.by(u,d)},orientation:y(()=>e.horizontal?"horizontal":"vertical"),labelRef:s,buttonRef:i,optionsRef:c,disabled:y(()=>e.disabled),options:f,searchQuery:l,activeOptionIndex:a,activationTrigger:O,closeListbox(){e.disabled||t.value!==1&&(t.value=1,a.value=null)},openListbox(){e.disabled||t.value!==0&&(t.value=0)},goToOption(u,d,p){if(e.disabled||t.value===1)return;let b=L(),D=qe(u===I.Specific?{focus:I.Specific,id:d}:{focus:u},{resolveItems:()=>b.options,resolveActiveIndex:()=>b.activeOptionIndex,resolveId:j=>j.id,resolveDisabled:j=>j.dataRef.disabled});l.value="",a.value=D,O.value=p??1,f.value=b.options},search(u){if(e.disabled||t.value===1)return;let d=l.value!==""?0:1;l.value+=u.toLowerCase();let p=(a.value!==null?f.value.slice(a.value+d).concat(f.value.slice(0,a.value+d)):f.value).find(D=>D.dataRef.textValue.startsWith(l.value)&&!D.dataRef.disabled),b=p?f.value.indexOf(p):-1;b===-1||b===a.value||(a.value=b,O.value=1)},clearSearch(){e.disabled||t.value!==1&&l.value!==""&&(l.value="")},registerOption(u,d){let p=L(b=>[...b,{id:u,dataRef:d}]);f.value=p.options,a.value=p.activeOptionIndex},unregisterOption(u){let d=L(p=>{let b=p.findIndex(D=>D.id===u);return b!==-1&&p.splice(b,1),p});f.value=d.options,a.value=d.activeOptionIndex,O.value=1},theirOnChange(u){e.disabled||R(u)},select(u){e.disabled||R(A(h.value,{0:()=>u,1:()=>{let d=B(v.value.value).slice(),p=B(u),b=d.findIndex(D=>v.compare(p,B(D)));return b===-1?d.push(p):d.splice(b,1),d}}))}};pe([i,c],(u,d)=>{var p;v.closeListbox(),fe(d,ve.Loose)||(u.preventDefault(),(p=g(i))==null||p.focus())},y(()=>t.value===0)),Ie(de,v),me(y(()=>A(t.value,{0:H.Open,1:H.Closed})));let C=y(()=>{var u;return(u=g(i))==null?void 0:u.closest("form")});return K(()=>{re([C],()=>{if(!C.value||e.defaultValue===void 0)return;function u(){v.theirOnChange(e.defaultValue)}return C.value.addEventListener("reset",u),()=>{var d;(d=C.value)==null||d.removeEventListener("reset",u)}},{immediate:!0})}),()=>{let{name:u,modelValue:d,disabled:p,form:b,...D}=e,j={open:t.value===0,disabled:p,value:_.value};return ee(W,[...u!=null&&_.value!=null?se({[u]:_.value}).map(([Z,ce])=>ee(be,ge({features:he.Hidden,key:Z,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:b,name:Z,value:ce}))):[],E({ourProps:{},theirProps:{...n,...xe(D,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:j,slots:o,attrs:n,name:"Listbox"})])}}}),ot=M({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-listbox-label-${Y()}`}},setup(e,{attrs:o,slots:n}){let r=z("ListboxLabel");function t(){var s;(s=g(r.buttonRef))==null||s.focus({preventScroll:!0})}return()=>{let s={open:r.listboxState.value===0,disabled:r.disabled.value},{id:i,...c}=e,f={id:i,ref:r.labelRef,onClick:t};return E({ourProps:f,theirProps:c,slot:s,attrs:o,slots:n,name:"ListboxLabel"})}}}),nt=M({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${Y()}`}},setup(e,{attrs:o,slots:n,expose:r}){let t=z("ListboxButton");r({el:t.buttonRef,$el:t.buttonRef});function s(l){switch(l.key){case x.Space:case x.Enter:case x.ArrowDown:l.preventDefault(),t.openListbox(),V(()=>{var a;(a=g(t.optionsRef))==null||a.focus({preventScroll:!0}),t.value.value||t.goToOption(I.First)});break;case x.ArrowUp:l.preventDefault(),t.openListbox(),V(()=>{var a;(a=g(t.optionsRef))==null||a.focus({preventScroll:!0}),t.value.value||t.goToOption(I.Last)});break}}function i(l){switch(l.key){case x.Space:l.preventDefault();break}}function c(l){t.disabled.value||(t.listboxState.value===0?(t.closeListbox(),V(()=>{var a;return(a=g(t.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(l.preventDefault(),t.openListbox(),et(()=>{var a;return(a=g(t.optionsRef))==null?void 0:a.focus({preventScroll:!0})})))}let f=He(y(()=>({as:e.as,type:o.type})),t.buttonRef);return()=>{var l,a;let O={open:t.listboxState.value===0,disabled:t.disabled.value,value:t.value.value},{id:L,...h}=e,P={ref:t.buttonRef,id:L,type:f.value,"aria-haspopup":"listbox","aria-controls":(l=g(t.optionsRef))==null?void 0:l.id,"aria-expanded":t.listboxState.value===0,"aria-labelledby":t.labelRef.value?[(a=g(t.labelRef))==null?void 0:a.id,L].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:s,onKeyup:i,onClick:c};return E({ourProps:P,theirProps:h,slot:O,attrs:o,slots:n,name:"ListboxButton"})}}}),lt=M({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${Y()}`}},setup(e,{attrs:o,slots:n,expose:r}){let t=z("ListboxOptions"),s=k(null);r({el:t.optionsRef,$el:t.optionsRef});function i(l){switch(s.value&&clearTimeout(s.value),l.key){case x.Space:if(t.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),t.search(l.key);case x.Enter:if(l.preventDefault(),l.stopPropagation(),t.activeOptionIndex.value!==null){let a=t.options.value[t.activeOptionIndex.value];t.select(a.dataRef.value)}t.mode.value===0&&(t.closeListbox(),V(()=>{var a;return(a=g(t.buttonRef))==null?void 0:a.focus({preventScroll:!0})}));break;case A(t.orientation.value,{vertical:x.ArrowDown,horizontal:x.ArrowRight}):return l.preventDefault(),l.stopPropagation(),t.goToOption(I.Next);case A(t.orientation.value,{vertical:x.ArrowUp,horizontal:x.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),t.goToOption(I.Previous);case x.Home:case x.PageUp:return l.preventDefault(),l.stopPropagation(),t.goToOption(I.First);case x.End:case x.PageDown:return l.preventDefault(),l.stopPropagation(),t.goToOption(I.Last);case x.Escape:l.preventDefault(),l.stopPropagation(),t.closeListbox(),V(()=>{var a;return(a=g(t.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case x.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(t.search(l.key),s.value=setTimeout(()=>t.clearSearch(),350));break}}let c=ye(),f=y(()=>c!==null?(c.value&H.Open)===H.Open:t.listboxState.value===0);return()=>{var l,a,O,L;let h={open:t.listboxState.value===0},{id:P,...R}=e,_={"aria-activedescendant":t.activeOptionIndex.value===null||(l=t.options.value[t.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":t.mode.value===1?!0:void 0,"aria-labelledby":(L=(a=g(t.labelRef))==null?void 0:a.id)!=null?L:(O=g(t.buttonRef))==null?void 0:O.id,"aria-orientation":t.orientation.value,id:P,onKeydown:i,role:"listbox",tabIndex:0,ref:t.optionsRef};return E({ourProps:_,theirProps:R,slot:h,attrs:o,slots:n,features:G.RenderStrategy|G.Static,visible:f.value,name:"ListboxOptions"})}}}),at=M({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${Y()}`}},setup(e,{slots:o,attrs:n,expose:r}){let t=z("ListboxOption"),s=k(null);r({el:s,$el:s});let i=y(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===e.id:!1),c=y(()=>A(t.mode.value,{0:()=>t.compare(B(t.value.value),B(e.value)),1:()=>B(t.value.value).some(v=>t.compare(B(v),B(e.value)))})),f=y(()=>A(t.mode.value,{1:()=>{var v;let C=B(t.value.value);return((v=t.options.value.find(u=>C.some(d=>t.compare(B(d),B(u.dataRef.value)))))==null?void 0:v.id)===e.id},0:()=>c.value})),l=Je(s),a=y(()=>({disabled:e.disabled,value:e.value,get textValue(){return l()},domRef:s}));K(()=>t.registerOption(e.id,a)),Ce(()=>t.unregisterOption(e.id)),K(()=>{re([t.listboxState,c],()=>{t.listboxState.value===0&&c.value&&A(t.mode.value,{1:()=>{f.value&&t.goToOption(I.Specific,e.id)},0:()=>{t.goToOption(I.Specific,e.id)}})},{immediate:!0})}),ae(()=>{t.listboxState.value===0&&i.value&&t.activationTrigger.value!==0&&V(()=>{var v,C;return(C=(v=g(s))==null?void 0:v.scrollIntoView)==null?void 0:C.call(v,{block:"nearest"})})});function O(v){if(e.disabled)return v.preventDefault();t.select(e.value),t.mode.value===0&&(t.closeListbox(),V(()=>{var C;return(C=g(t.buttonRef))==null?void 0:C.focus({preventScroll:!0})}))}function L(){if(e.disabled)return t.goToOption(I.Nothing);t.goToOption(I.Specific,e.id)}let h=Ye();function P(v){h.update(v)}function R(v){h.wasMoved(v)&&(e.disabled||i.value||t.goToOption(I.Specific,e.id,0))}function _(v){h.wasMoved(v)&&(e.disabled||i.value&&t.goToOption(I.Nothing))}return()=>{let{disabled:v}=e,C={active:i.value,selected:c.value,disabled:v},{id:u,value:d,disabled:p,...b}=e,D={id:u,ref:s,role:"option",tabIndex:v===!0?void 0:-1,"aria-disabled":v===!0?!0:void 0,"aria-selected":c.value,disabled:void 0,onClick:O,onFocus:L,onPointerenter:P,onMouseenter:P,onPointermove:R,onMousemove:R,onPointerleave:_,onMouseleave:_};return E({ourProps:D,theirProps:b,slot:C,attrs:n,slots:o,name:"ListboxOption"})}}});function rt(e,o){return T(),F("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[m("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})])}function st(e,o){return T(),F("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[m("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}const it={name:"BaseSelect",components:{Listbox:tt,ListboxButton:nt,ListboxLabel:ot,ListboxOption:at,ListboxOptions:lt,CheckIcon:rt,ChevronUpDownIcon:st},props:{id:{type:String,required:!0},label:{type:String,required:!0},currentValue:{type:Object},options:{type:Array,required:!0}},emits:["changed"],data(){return{selected:this.currentValue}}},ut={class:"relative mt-2"},dt={class:"flex items-center"},ct={class:"ml-3 block truncate"},pt={class:"pointer-events-none absolute inset-y-0 right-0 ml-3 flex items-center pr-2"},ft={class:"flex items-center"};function vt(e,o,n,r,t,s){const i=w("ListboxLabel"),c=w("ChevronUpDownIcon"),f=w("ListboxButton"),l=w("CheckIcon"),a=w("ListboxOption"),O=w("ListboxOptions"),L=w("Listbox");return T(),Q(L,{as:"div",modelValue:t.selected,"onUpdate:modelValue":[o[0]||(o[0]=h=>t.selected=h),o[1]||(o[1]=h=>e.$emit("changed",t.selected))]},{default:$(()=>[S(i,{class:"block text-sm font-medium leading-6 text-gray-900"},{default:$(()=>[U(N(n.label),1)]),_:1}),m("div",ut,[S(f,{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:text-sm sm:leading-6"},{default:$(()=>[m("span",dt,[m("span",ct,N(t.selected.label),1)]),m("span",pt,[S(c,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),S(Re,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:$(()=>[S(O,{class:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:$(()=>[(T(!0),F(W,null,Pe(n.options,(h,P)=>(T(),Q(a,{as:"template",key:`${n.id}-${P}`,value:h},{default:$(({active:R,selected:_})=>[m("li",{class:q([R?"bg-green-300 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[m("div",ft,[m("span",{class:q([_?"font-semibold":"font-normal","ml-3 block truncate"])},N(h.label),3)]),_?(T(),F("span",{key:0,class:q([R?"text-white":"text-green-300","absolute inset-y-0 right-0 flex items-center pr-4"])},[S(l,{class:"h-5 w-5","aria-hidden":"true"})],2)):J("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])}const mt=X(it,[["render",vt]]),bt={name:"ImportOrders",components:{AuthenticatedLayout:we,Head:$e,InputError:Te,InputLabel:Be,PrimaryButton:Ae,TextInput:Fe,Dropdown:Oe,DropdownLink:Le,BaseSelect:mt,PageLoader:ze,PopupModal:Se,DangerButton:Ve},props:{stores:{type:Array,required:!0}},data(){return{storesOptions:this.stores.length>0||typeof this.stores=="object"?this.mapOptions():[],selectedStore:this.stores.length>0||typeof this.stores=="object"?this.mapOptions()[0]:[],form:{storeId:this.stores.length>0||typeof this.stores=="object"?this.mapOptions()[0].value:[],file:null},response:{errors:!1,message:""},importConfirmation:!1,importInterval:null}},methods:{uploadOrders(){this.response={errors:!1,message:""},this.form.processing=!0;let e=new FormData;e.append("file",this.form.file),e.append("storeId",this.form.storeId),this.validateCsv().then(o=>{if(console.log("validation",o),o.length>0){let n=o.join(",");this.form.processing=!1,this.response={errors:!0,message:`Required columns are missing. ${n}`}}else axios.post(route("orders.import"),e).then(n=>{this.form.processing=!1,this.response=n.data,this.importConfirmation=!1,setTimeout(()=>{window.location.reload()},2e3)}).catch(n=>{console.log(n),this.form.processing=!1,this.response={errors:!0,message:"Something went wrong, try again later."}})}).catch(o=>{console.error(o)})},handleFileChange(e){console.log(e.target.files[0]),this.form.file=e.target.files[0]},validateCsv(){return new Promise((e,o)=>{let n=["order_id","order_date","items_count","order_total"];if(this.form.file){const r=new FileReader;r.onload=t=>{const c=t.target.result.split(`\r
`)[0].split(","),f=n.filter(l=>!c.includes(l));e(f)},r.readAsText(this.form.file)}else o("No file selected")})},mapOptions(){return typeof this.stores=="object"?Object.values(this.stores).map(e=>({value:e.id,label:e.name})):this.stores.map(e=>({value:e.id,label:e.name}))}}},gt=m("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"ייבוא הזמנות",-1),ht={class:"py-12"},xt={class:"max-w-7xl mx-auto md:px-6 lg:px-8 space-y-6"},yt={class:"p-4 md:p-8 bg-white shadow md:rounded-lg grid grid-cols-1 md:grid-cols-2 gap-5"},_t=m("header",{class:"w-full"},[m("h2",{class:"text-lg font-medium text-gray-900"},"נא לבחור קובץ הזמנות לייבוא"),m("p",{class:"mt-1 text-sm text-gray-600"},[m("a",{href:"/download-file/eyez_download_sample.csv",target:"_blank",download:"",class:"font-semibold underline"}," כאן ניתן להוריד תבנית מתאימה להזמנות ")])],-1),wt={key:0},Ot={class:"mb-4"},Lt={class:"mb-4"},St={class:"flex items-center gap-4"},kt={key:1,class:""},It={class:"text-lg font-medium text-gray-900 text-center"},Ct={class:"flex justify-center gap-x-4 mt-6"};function Dt(e,o,n,r,t,s){const i=w("Head"),c=w("base-select"),f=w("InputLabel"),l=w("InputError"),a=w("PrimaryButton"),O=w("page-loader"),L=w("AuthenticatedLayout"),h=w("DangerButton"),P=w("popup-modal");return T(),F(W,null,[S(i,{title:"ייבוא הזמנות"}),S(L,null,{header:$(()=>[gt]),default:$(()=>{var R;return[m("div",ht,[m("div",xt,[m("div",yt,[_t,t.storesOptions.length>0?(T(),F("div",wt,[m("div",Ot,[S(c,{options:t.storesOptions,id:"store",label:"נא לבחור חנות",currentValue:t.selectedStore,onChanged:o[0]||(o[0]=_=>t.form.storeId=_.value)},null,8,["options","currentValue"])]),m("div",Lt,[S(f,{for:"fileInput",value:"נא לבחור קובץ"}),m("input",{id:"fileInput",type:"file",class:"mt-1 block w-full ring-1 ring-inset ring-gray-300 py-1 px-4 rounded-md",onChange:o[1]||(o[1]=(..._)=>s.handleFileChange&&s.handleFileChange(..._))},null,32),S(l,{class:"mt-2",message:(R=t.form.errors)==null?void 0:R.orgId},null,8,["message"])]),m("div",St,[S(a,{onClick:o[2]||(o[2]=()=>{this.importConfirmation=!0}),disabled:t.form.processing||t.form.file===null},{default:$(()=>[U("שמירה")]),_:1},8,["disabled"]),t.form.processing?(T(),Q(O,{key:0,width:"30",height:"30"})):J("",!0),t.response.message.length>0?(T(),F("p",{key:1,class:q(`${t.response.errors===!0?"text-red-500":"text-green-500"}`)},N(t.response.message),3)):J("",!0)])])):(T(),F("div",kt," You didn't create opretail account or you don't have any stores created. "))])])])]}),_:1}),S(P,{show:t.importConfirmation,"max-width":"max-w-xl",onClose:o[4]||(o[4]=()=>{this.importConfirmation=!1})},{default:$(()=>[m("h2",It,"Are you sure you want to import orders to "+N(t.selectedStore.label)+"?",1),m("div",Ct,[S(a,{onClick:s.uploadOrders},{default:$(()=>[U("Yes")]),_:1},8,["onClick"]),S(h,{onClick:o[3]||(o[3]=()=>{this.importConfirmation=!1})},{default:$(()=>[U("No")]),_:1})])]),_:1},8,["show"])],64)}const jt=X(bt,[["render",Dt]]);export{jt as default};
